<div class="course-enrollments-container">
  <div class="page-header">
    <h2>📊 Inscripciones por Curso</h2>
    <p>Consulta qué estudiantes están inscritos en cada curso</p>
  </div>

  <!-- Selector de curso -->
  <div class="course-selector">
    <label for="courseSelect">Selecciona un curso:</label>
    <select 
      id="courseSelect"
      [(ngModel)]="selectedCourseId" 
      (ngModelChange)="onCourseChange()"
      [disabled]="loadingCourses">
      <option value="">Selecciona un curso</option>
      @for (course of courses; track course.id) {
        <option [value]="course.id">
          {{ course.title }} - {{ course.teacher }}
        </option>
      }
    </select>
  </div>

  <!-- Información del curso seleccionado -->
  @if (selectedCourse) {
    <div class="course-info">
      <h3>{{ selectedCourse.title }}</h3>
      <p><strong>Profesor:</strong> {{ selectedCourse.teacher }}</p>
      <p><strong>Descripción:</strong> {{ selectedCourse.description }}</p>
      <p><strong>Total de estudiantes inscritos:</strong> {{ enrollments.length }}</p>
    </div>
  }

  <!-- Tabla de inscripciones -->
  @if (selectedCourseId) {
    <div class="enrollments-table">
      @if (!loadingEnrollments && !error) {
        <shared-table 
          [data]="enrollments"
          [columns]="tableColumns"
          noDataMessage="No hay estudiantes inscritos en este curso aún.">
        </shared-table>
      }

      @if (loadingEnrollments) {
        <div class="loading">
          <p>Cargando inscripciones...</p>
        </div>
      }

      @if (error) {
        <div class="error">
          <p>❌ Error: {{ error }}</p>
          <shared-button (click)="loadEnrollments()">Reintentar</shared-button>
        </div>
      }
    </div>
  }

  <!-- Mensaje cuando no hay curso seleccionado -->
  @if (!selectedCourseId && !loadingCourses) {
    <div class="no-selection">
      <p>👆 Selecciona un curso para ver las inscripciones</p>
    </div>
  }
</div>
